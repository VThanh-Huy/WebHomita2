@using Homita.Models
@model List<Homita.Models.ViewModel.CartViewModel>

@{
    ViewBag.Title = "DatHang";
    Layout = "~/Views/Shared/_LayoutUser.cshtml";
}
<h1 style="text-align:center">THÔNG TIN GIỎ HÀNG</h1>

@{
    var sum = 0;
}
<div class="table-responsive">
    <table class="table">
        <thead>
            <tr>
                <th>Hình ảnh</th>
                <th>Tên sản phẩm</th>
                <th>Đơn giá</th>
                <th>Số lượng</th>
                <th>Tổng tiền</th>
                <th>Thao tác</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                var total = (int)item.Gia * item.SoLuong; // Tính tổng tiền cho mỗi sản phẩm
                <tr>
                    @*<td><img width="100" src="@Url.Content("~/Images/product/" + item.HinhAnh)" alt="Ảnh sản phẩm" /></td>*@
                    <td>@item.TenSP</td>
                    <td>@String.Format("{0:0,0}", item.Gia) VNĐ</td>
                    <td>@item.SoLuong</td>
                    <td>@String.Format("{0:0,0}", total) VNĐ</td>
                    <td class="box-footer">
                        <a href="/GioHang64131122/GioHang" style="background: #7b7b7b; color: #fff;" class="btn">Trở về giỏ hàng</a>
                    </td>
                </tr>
                sum += total; // Cộng dồn tổng tiền của giỏ hàng
            }
        </tbody>
        <tfoot>
            <tr>
                <th colspan="4"></th>
                <td colspan="2" style="color:red; font-weight: bold;">Tổng tiền: @String.Format("{0:0,0}", sum) VNĐ</td>
            </tr>
        </tfoot>
    </table>
</div>

<h2 style="text-align:center">THÔNG TIN ĐẶT HÀNG</h2>

@{
    KhachHang kh = (KhachHang)Session["Taikhoan"];
}

<table align="center" style="width: 60%;">
    @using (Html.BeginForm())
    {
        @Html.ValidationSummary(true)
        <tr style="height:40px">
            <td>Họ tên khách hàng:</td>
            <td style="font-weight:bold">@kh.HoTen</td>
        </tr>
        <tr style="height:40px">
            <td>Địa chỉ:</td>
            <td style="font-weight:bold">@kh.DiaChi</td>
        </tr>
        <tr style="height:40px">
            <td>Điện thoại:</td>
            <td style="font-weight:bold">@kh.SDT</td>
        </tr>
        <tr style="height:40px">
            <td>Ngày đặt:</td>
            <td style="font-weight:bold">@DateTime.Now.ToShortDateString()</td>
        </tr>
        @*<tr style="height:40px">
            <td>Ghi chú:</td>
            <td style="font-weight:bold">
                <p>(VD: Ngày giao hàng, màu sắc...)</p>
                <textarea name="GhiChu" rows="4" style="width:100%;"></textarea>
            </td>
        </tr>*@
        <tr style="height:40px">
            <td></td>
            <td>
                <input type="submit" value="ĐỒNG Ý ĐẶT HÀNG" class="btn btn-primary" />
            </td>
        </tr>
    }
</table>

